{% extends "home/base.html" %}

{% load static %}

{% block content %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>

<style>
    .intl-tel-input {
        width: 100%;
    }

    .intl-tel-input .iti {
        width: 100%;
    }

    .iti--separate-dial-code .iti__selected-dial-code {
        display: inline-block;
    }

    /* Make the mobile number box to the same width as the password box */
    .intl-tel-input input[type=tel] {
        width: 100%;
        box-sizing: border-box;
    }
</style>

<body>

    <!-- Loader Start -->
    <div class="fullpage-loader">
        <span></span>
        <span></span>

    </div>
    <!-- Loader End -->
    <!-- mobile fix menu start -->

    <!-- mobile fix menu end -->
    <!-- log in section start -->
    <section class="log-in-section background-image-2 section-b-space">
        <div class="container-fluid-lg w-100">
            <div class="row">
                <div class="col-xxl-6 col-xl-5 col-lg-6 d-lg-block d-none ms-auto">
                    <div class="image-contain">
                        <img src="../assets/images/inner-page/log-in.png" class="img-fluid" alt="">
                    </div>
                </div>
                <div class="col-xxl-4 col-xl-5 col-lg-6 col-sm-8 mx-auto">
                    <div class="log-in-box">
                        <div class="log-in-title">
                            <h3>Welcome To Channab</h3>
                        </div>

                        <div class="input-box">
                            <form method="post" class="row g-4">
                                {% csrf_token %}
                                <div class="col-12">
                                    <div class="form-floating theme-form-floating log-in-form">
                                        <input type="tel" class="form-control" name="{{ form.username.html_name }}" id="{{ form.username.auto_id }}" placeholder="Mobile Number">
                                        <label for="{{ form.username.auto_id }}"></label>
                                    </div>
                                </div>


                                <div class="col-12">
                                    <div class="form-floating theme-form-floating log-in-form">
                                        <input type="password" class="form-control" name="{{ form.password.html_name }}" id="{{ form.password.auto_id }}" placeholder="Password">
                                        <label for="{{ form.password.auto_id }}">Password</label>
                                    </div>
                                </div>


                                <div class="col-12">
                                    <div class="forgot-box">
                                        <div class="form-check ps-0 m-0 remember-box">
                                            <input class="checkbox_animated check-box" type="checkbox" id="flexCheckDefault" name="remember_me">
                                            <label class="form-check-label" for="flexCheckDefault">Remember me</label>
                                        </div>

                                        <a href="forgot.html" class="forgot-password">Forgot Password?</a>
                                    </div>
                                </div>

                                <div class="col-12">
        <button class="btn btn-animation w-100 justify-content-center" type="submit">Log In</button>
    </div>
                            </form>
                        </div>
                        <div class="other-log-in">
                            <h6></h6>
                        </div>

                        <div class="sign-up-box">
                            <h4>Don't have an account?</h4>
                            <a href="{% url 'accounts:signup' %}">Sign Up</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- log in section end -->
</body>

</html>
<script>
$(document).ready(function() {
    var input = document.querySelector("#{{ form.username.auto_id }}");
    var iti = window.intlTelInput(input, {
      initialCountry: "pk",
      separateDialCode: true,
      dropdownContainer: document.body,
      utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
    });

    // Listen for form submission
    $('#loginForm').on('submit', function(e) {
        // Get the full international number
        var fullNumber = iti.getNumber();
        
        // Set the full international number to the username field
        $('#{{ form.username.auto_id }}').val(fullNumber);
    });
});
</script>
{% endblock %}